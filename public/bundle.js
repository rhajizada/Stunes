var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function l(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(){return f("")}function m(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}let y;function h(t){y=t}const v=[],g=[],k=[],b=[],x=Promise.resolve();let w=!1;function _(t){k.push(t)}function j(){const t=new Set;do{for(;v.length;){const t=v.shift();h(t),L(t.$$)}for(;g.length;)g.pop()();for(let e=0;e<k.length;e+=1){const n=k[e];t.has(n)||(n(),t.add(n))}k.length=0}while(v.length);for(;b.length;)b.pop()();w=!1}function L(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(_))}const E=new Set;let C;function S(){C={r:0,c:[],p:C}}function A(){C.r||o(C.c),C=C.p}function O(t,e){t&&t.i&&(E.delete(t),t.i(e))}function N(t,e,n,r){if(t&&t.o){if(E.has(t))return;E.add(t),C.c.push(()=>{E.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function R(t,n){const r=n.token={};function o(t,o,l,c){if(n.token!==r)return;n.resolved=l&&{[l]:c};const s=e(e({},n.ctx),n.resolved),a=t&&(n.current=t)(s);n.block&&(n.blocks?n.blocks.forEach((t,e)=>{e!==o&&t&&(S(),N(t,1,1,()=>{n.blocks[e]=null}),A())}):n.block.d(1),a.c(),O(a,1),a.m(n.mount(),n.anchor),j()),n.block=a,n.blocks&&(n.blocks[o]=a)}if((l=t)&&"object"==typeof l&&"function"==typeof l.then){if(t.then(t=>{o(n.then,1,n.value,t)},t=>{o(n.catch,2,n.error,t)}),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved={[n.value]:t}}var l}function T(t,e,r){const{fragment:c,on_mount:s,on_destroy:a,after_update:i}=t.$$;c.m(e,r),_(()=>{const e=s.map(n).filter(l);a?a.push(...e):o(e),t.$$.on_mount=[]}),i.forEach(_)}function U(t,e){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function B(t,e){t.$$.dirty||(v.push(t),w||(w=!0,x.then(j)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function q(e,n,l,c,s,a){const i=y;h(e);const u=n.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(i?i.$$.context:[]),callbacks:r(),dirty:null};let d=!1;var p;f.ctx=l?l(e,u,(t,n)=>{f.ctx&&s(f.ctx[t],f.ctx[t]=n)&&(f.bound[t]&&f.bound[t](n),d&&B(e,t))}):u,f.update(),d=!0,o(f.before_update),f.fragment=c(f.ctx),n.target&&(n.hydrate?f.fragment.l((p=n.target,Array.from(p.childNodes))):f.fragment.c(),n.intro&&O(e.$$.fragment),T(e,n.target,n.anchor),j()),h(i)}class M{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function P(e){var n,r,o,l,c,p,$,y,h,v;return{c(){n=u("div"),(r=u("div")).textContent="Get ready to transfer your Spotify playlists to CSV files",o=d(),l=u("div"),(c=u("h5")).textContent="First login",p=d(),($=u("p")).textContent="Login with your Spotify Account",y=d(),h=u("a"),v=f("Login"),m(r,"class","card-header"),m(c,"class","card-title"),m($,"class","card-text"),m(h,"href",z),m(h,"class","btn btn-primary"),m(l,"class","card-body"),m(n,"class","card center bg-secondary svelte-15v4z7f")},m(t,e){a(t,n,e),s(n,r),s(n,o),s(n,l),s(l,c),s(l,p),s(l,$),s(l,y),s(l,h),s(h,v)},p:t,i:t,o:t,d(t){t&&i(n)}}}let z="/login";class D extends M{constructor(t){super(),q(this,t,null,P,c,[])}}function F(e){var n,r,o,l,c,p,y,h,v,g,k,b,x,w,_,j=e.playlist.meta.name,L=e.playlist.meta.tracks.total;return{c(){var t,s,a,i;n=u("div"),r=u("img"),c=d(),p=u("div"),y=u("h5"),h=f(j),v=d(),g=u("p"),k=f(L),b=f(" tracks"),x=d(),(w=u("button")).textContent="Download",m(r,"src",o=e.playlist.meta.images[0].url),m(r,"class","card-img-top svelte-10500pv"),m(r,"alt",l=e.playlist.meta.images[0].url),m(y,"class","card-title svelte-10500pv"),m(g,"class","card-text svelte-10500pv"),m(w,"type","button"),m(w,"class","btn btn-success"),m(p,"class","card-body svelte-10500pv"),m(n,"class","card svelte-10500pv"),t=w,s="click",a=e.download,t.addEventListener(s,a,i),_=(()=>t.removeEventListener(s,a,i))},m(t,e){a(t,n,e),s(n,r),s(n,c),s(n,p),s(p,y),s(y,h),s(p,v),s(p,g),s(g,k),s(g,b),s(p,x),s(p,w)},p(t,e){t.playlist&&o!==(o=e.playlist.meta.images[0].url)&&m(r,"src",o),t.playlist&&l!==(l=e.playlist.meta.images[0].url)&&m(r,"alt",l),t.playlist&&j!==(j=e.playlist.meta.name)&&$(h,j),t.playlist&&L!==(L=e.playlist.meta.tracks.total)&&$(k,L)},i:t,o:t,d(t){t&&i(n),_()}}}function G(t,e,n){let{playlist:r}=e;const o=(l=document.createElement("a"),document.body.appendChild(l),l.style="display: none",function(t,e){let n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(n);l.href=r,l.download=e,l.click(),window.URL.revokeObjectURL(r)});var l;const c=()=>{let t="Title, Artist, Album\n";for(let e of r.tracklist){let n=e.track.name,r=e.track.album.name,o=[];for(let t of e.track.artists)o.push(t.name);t+=`"${n}"; "${o.join(", ")}"; "${r}"\n`}return console.log(t),t};return t.$set=(t=>{"playlist"in t&&n("playlist",r=t.playlist)}),{playlist:r,download:()=>{o(c(),`${r.meta.name}.csv`)}}}class H extends M{constructor(t){super(),q(this,t,G,F,c,["playlist"])}}function V(e){var n;return{c(){(n=u("div")).innerHTML='<div class="spinner-border text-success center svelte-wjgisn" role="status"><span class="sr-only ">Loading...</span></div>',m(n,"class","d-flex justify-content-center svelte-wjgisn")},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&i(n)}}}class I extends M{constructor(t){super(),q(this,t,null,V,c,[])}}function J(t,e,n){const r=Object.create(t);return r.element=e[n],r}function K(e){var n,r,o=e.error;return{c(){n=u("p"),r=f(o),m(n,"class","center svelte-3bl96m")},m(t,e){a(t,n,e),s(n,r)},p(t,e){t.playlists&&o!==(o=e.error)&&$(r,o)},i:t,o:t,d(t){t&&i(n)}}}function Q(t){for(var e,n,r=t.array,o=[],l=0;l<r.length;l+=1)o[l]=W(J(t,r,l));const c=t=>N(o[t],1,1,()=>{o[t]=null});return{c(){e=u("div");for(var t=0;t<o.length;t+=1)o[t].c();m(e,"class","card-columns center svelte-3bl96m")},m(t,r){a(t,e,r);for(var l=0;l<o.length;l+=1)o[l].m(e,null);n=!0},p(t,n){if(t.playlists){r=n.array;for(var l=0;l<r.length;l+=1){const c=J(n,r,l);o[l]?(o[l].p(t,c),O(o[l],1)):(o[l]=W(c),o[l].c(),O(o[l],1),o[l].m(e,null))}for(S(),l=r.length;l<o.length;l+=1)c(l);A()}},i(t){if(!n){for(var e=0;e<r.length;e+=1)O(o[e]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)N(o[t]);n=!1},d(t){t&&i(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t)}}}function W(t){var e,n=new H({props:{playlist:t.element}});return{c(){n.$$.fragment.c()},m(t,r){T(n,t,r),e=!0},p(t,e){var r={};t.playlists&&(r.playlist=e.element),n.$set(r)},i(t){e||(O(n.$$.fragment,t),e=!0)},o(t){N(n.$$.fragment,t),e=!1},d(t){U(n,t)}}}function X(e){var n,r=new I({});return{c(){r.$$.fragment.c()},m(t,e){T(r,t,e),n=!0},p:t,i(t){n||(O(r.$$.fragment,t),n=!0)},o(t){N(r.$$.fragment,t),n=!1},d(t){U(r,t)}}}function Y(t){var n,r,o;let l={ctx:t,current:null,token:null,pending:X,then:Q,catch:K,value:"array",error:"error",blocks:[,,,]};return R(r=t.playlists,l),{c(){n=p(),l.block.c()},m(t,e){a(t,n,e),l.block.m(t,l.anchor=e),l.mount=(()=>n.parentNode),l.anchor=n,o=!0},p(n,o){t=o,l.ctx=t,"playlists"in n&&r!==(r=t.playlists)&&R(r,l)||l.block.p(n,e(e({},t),l.resolved))},i(t){o||(O(l.block),o=!0)},o(t){for(let t=0;t<3;t+=1){N(l.blocks[t])}o=!1},d(t){t&&i(n),l.block.d(t),l.token=null,l=null}}}function Z(t,e,n){let{token:r}=e;let o;return t.$set=(t=>{"token"in t&&n("token",r=t.token)}),t.$$.update=((t={token:1})=>{t.token&&n("playlists",o=(async t=>{let e=await fetch(`/playlists/${t}`,{method:"POST",body:{token:t}}),n=e.json();if(e.ok)return n;throw new Error(res.text())})(r))}),{token:r,playlists:o}}class tt extends M{constructor(t){super(),q(this,t,Z,Y,c,["token"])}}function et(t){var e,n=new tt({props:{token:t.token}});return{c(){n.$$.fragment.c()},m(t,r){T(n,t,r),e=!0},p(t,e){var r={};t.token&&(r.token=e.token),n.$set(r)},i(t){e||(O(n.$$.fragment,t),e=!0)},o(t){N(n.$$.fragment,t),e=!1},d(t){U(n,t)}}}function nt(e){var n,r=new D({});return{c(){r.$$.fragment.c()},m(t,e){T(r,t,e),n=!0},p:t,i(t){n||(O(r.$$.fragment,t),n=!0)},o(t){N(r.$$.fragment,t),n=!1},d(t){U(r,t)}}}function rt(t){var e,n,r,o,l=[nt,et],c=[];function s(t){return t.token?1:0}return e=s(t),n=c[e]=l[e](t),{c(){n.c(),r=p()},m(t,n){c[e].m(t,n),a(t,r,n),o=!0},p(t,o){var a=e;(e=s(o))===a?c[e].p(t,o):(S(),N(c[a],1,1,()=>{c[a]=null}),A(),(n=c[e])||(n=c[e]=l[e](o)).c(),O(n,1),n.m(r.parentNode,r))},i(t){o||(O(n),o=!0)},o(t){N(n),o=!1},d(t){c[e].d(t),t&&i(r)}}}function ot(t,e,n){let r,o;return t.$$.update=((t={cookies:1})=>{t.cookies&&n("token",o=r[0].split("=")[1])}),n("cookies",r=document.cookie.split(";")),{token:o}}return new class extends M{constructor(t){super(),q(this,t,ot,rt,c,[])}}({target:document.querySelector("#app")})}();
//# sourceMappingURL=bundle.js.map
